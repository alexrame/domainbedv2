# PACS

KEYTEST=val python3 -m domainbed.scripts.collect_results --input_dirs /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs0_erm_lp_0926/ /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs1_erm_lp_0926/ /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs2_erm_lp_0926/ /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs3_erm_lp_0926/ /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs0_twama_din_lpl4_0926/ /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs1_twama_din_lpl4_0926/ /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs2_twama_din_lpl4_0926/ /private/home/alexandrerame/dataplace/experiments/domainbed/pacs/pacs3_twama_din_lpl4_0926/


printres:  {'acc': 0.904296875, 'acc_ens': 0.8994140625, 'acc_netm': 0.857177734375, 'divq_netm': 0.9197672800935245, 'divr_netm': 1.3084934760582299, 'length': 20, 'testenv': 0, 'topk': 0, 'train_acc': 0.9810964083175804, 'train_acc_ens': 0.9785759294265911, 'train_acc_netm': 0.967989918084436, 'train_divq_netm': 0.9673020678803382, 'train_divr_netm': 1.9687649082256597}
printres:  {'acc': 0.8272184300341296, 'acc_ens': 0.810580204778157, 'acc_netm': 0.7831697952218429, 'divq_netm': 0.9426827913493008, 'divr_netm': 0.7623993045050517, 'length': 20, 'testenv': 1, 'topk': 0, 'train_acc': 0.9764397905759162, 'train_acc_ens': 0.9790575916230366, 'train_acc_netm': 0.9639397905759161, 'train_divq_netm': 0.9687276012778341, 'train_divr_netm': 1.7819155276089618}
printres:  {'acc': 0.9868263473053892, 'acc_ens': 0.9820359281437125, 'acc_netm': 0.9698802395209579, 'divq_netm': 0.9742244821124413, 'divr_netm': 2.133378269782624, 'length': 20, 'testenv': 2, 'topk': 0, 'train_acc': 0.9741275571600482, 'train_acc_ens': 0.9741275571600482, 'train_acc_netm': 0.9616726835138387, 'train_divq_netm': 0.967228145259152, 'train_divr_netm': 1.7727327164801048}
printres:  {'acc': 0.8246373122932044, 'acc_ens': 0.8261644184270807, 'acc_netm': 0.764482056502927, 'divq_netm': 0.8754844554009579, 'divr_netm': 1.1360241989206323, 'length': 20, 'testenv': 3, 'topk': 0, 'train_acc': 0.9818331957060281, 'train_acc_ens': 0.9843104872006606, 'train_acc_netm': 0.9693228736581337, 'train_divq_netm': 0.9704223972118735, 'train_divr_netm': 1.930836819814452}

printres:  {'acc': 0.92626953125, 'acc_ens': 0.9287109375, 'acc_netm': 0.8952392578125, 'divq_netm': 0.9266438803839181, 'divr_netm': 1.5919874336533382, 'length': 20, 'testenv': 0, 'topk': 0, 'train_acc': 0.9817265280403277, 'train_acc_ens': 0.9810964083175804, 'train_acc_netm': 0.9719596723377443, 'train_divq_netm': 0.9726525693906101, 'train_divr_netm': 1.9158820299969843}
printres:  {'acc': 0.889505119453925, 'acc_ens': 0.8818259385665529, 'acc_netm': 0.8494453924914677, 'divq_netm': 0.9416654137443378, 'divr_netm': 1.1225569456177467, 'length': 20, 'testenv': 1, 'topk': 0, 'train_acc': 0.9770942408376964, 'train_acc_ens': 0.9790575916230366, 'train_acc_netm': 0.96809554973822, 'train_divq_netm': 0.9724396972190711, 'train_divr_netm': 1.7858118641707315}
printres:  {'acc': 0.9892215568862276, 'acc_ens': 0.9874251497005988, 'acc_netm': 0.9739520958083834, 'divq_netm': 0.9767204062146287, 'divr_netm': 2.214005541546244, 'length': 20, 'testenv': 2, 'topk': 0, 'train_acc': 0.9783393501805054, 'train_acc_ens': 0.9783393501805054, 'train_acc_netm': 0.9659747292418774, 'train_divq_netm': 0.9688303473838579, 'train_divr_netm': 1.8496673430319233}
printres:  {'acc': 0.8785950623568338, 'acc_ens': 0.8750318147111225, 'acc_netm': 0.8395011453296005, 'divq_netm': 0.9127496508045935, 'divr_netm': 1.2975918175921812, 'length': 20, 'testenv': 3, 'topk': 0, 'train_acc': 0.9826589595375722, 'train_acc_ens': 0.9843104872006606, 'train_acc_netm': 0.973699421965318, 'train_divq_netm': 0.9761278783010069, 'train_divr_netm': 1.8775399671336153}
printres:  {'acc': 0.93017578125, 'acc_ens': 0.93212890625, 'acc_netm': 0.9227294921875, 'divq_netm': 0.9855320583369674, 'divr_netm': 0.6847155592198012, 'length': 20, 'testenv': 0, 'topk': 0, 'train_acc': 0.9817265280403277, 'train_acc_ens': 0.9798361688720857, 'train_acc_netm': 0.9779143037177063, 'train_divq_netm': 0.9941692418533373, 'train_divr_netm': 0.851000741322951}
printres:  {'acc': 0.8839590443686007, 'acc_ens': 0.8856655290102389, 'acc_netm': 0.87455204778157, 'divq_netm': 0.9804395006006357, 'divr_netm': 0.6674909601698649, 'length': 20, 'testenv': 1, 'topk': 0, 'train_acc': 0.9784031413612565, 'train_acc_ens': 0.9764397905759162, 'train_acc_netm': 0.9738547120418849, 'train_divq_netm': 0.9933558468186183, 'train_divr_netm': 0.864460955931612}
printres:  {'acc': 0.9898203592814371, 'acc_ens': 0.988622754491018, 'acc_netm': 0.9861976047904191, 'divq_netm': 0.9967947708688093, 'divr_netm': 0.8771992214920622, 'length': 20, 'testenv': 2, 'topk': 0, 'train_acc': 0.9753309265944645, 'train_acc_ens': 0.9753309265944645, 'train_acc_netm': 0.9735559566787002, 'train_divq_netm': 0.993715860921279, 'train_divr_netm': 0.8562778541487369}
printres:  {'acc': 0.8785950623568338, 'acc_ens': 0.8742682616441843, 'acc_netm': 0.8649147365741919, 'divq_netm': 0.984289013048098, 'divr_netm': 0.5214971450983722, 'length': 20, 'testenv': 3, 'topk': 0, 'train_acc': 0.9793559042113955, 'train_acc_ens': 0.9801816680429397, 'train_acc_netm': 0.979066886870355, 'train_divq_netm': 0.9967390422800015, 'train_divr_netm': 0.639093132288177}


{'acc': 0.93505859375, 'env_0_in_acc': 0.9296636085626911, 'env_0_out_acc': 0.941320293398533, 'env_1_in_acc': 1.0, 'env_1_out_acc': 0.9850427350427351, 'env_2_in_acc': 1.0, 'env_2_out_acc': 0.9940119760479041, 'env_3_in_acc': 1.0, 'env_3_out_acc': 0.975796178343949, 'length': 20, 'maxm': 3, 'robust': 0.0, 'which': 'stepbest'}
{'acc': 0.9023037542662116, 'env_0_in_acc': 1.0, 'env_0_out_acc': 0.9853300733496333, 'env_1_in_acc': 0.92, 'env_1_out_acc': 0.9145299145299145, 'env_2_in_acc': 1.0, 'env_2_out_acc': 0.9880239520958084, 'env_3_in_acc': 1.0, 'env_3_out_acc': 0.9681528662420382, 'length': 20, 'maxm': 3, 'robust': 0.0, 'step': 'best'}
{'acc': 0.9850299401197605, 'env_0_in_acc': 1.0, 'env_0_out_acc': 0.9853300733496333, 'env_1_in_acc': 1.0, 'env_1_out_acc': 0.9829059829059829, 'env_2_in_acc': 0.9812734082397003, 'env_2_out_acc': 0.9790419161676647, 'env_3_in_acc': 1.0, 'env_3_out_acc': 0.9770700636942675, 'length': 20, 'maxm': 3, 'robust': 0.0, 'step': 'best'}
{'acc': 0.8824128276915245, 'env_0_in_acc': 1.0, 'env_0_out_acc': 0.9755501222493888, 'env_1_in_acc': 0.9973333333333333, 'env_1_out_acc': 0.9764957264957265, 'env_2_in_acc': 1.0, 'env_2_out_acc': 0.9970059880239521, 'env_3_in_acc': 0.8630573248407644, 'env_3_out_acc': 0.8904458598726115, 'length': 20, 'maxm': 3, 'robust': 0.0, 'which': 'step100'}

-------- Dataset: PACS, model selection method: training-domain validation set
Algorithm             A                     C                     P                     S                     Avg

ERM                   85.6 +/- 0.0          73.2 +/- 0.0          98.6 +/- 0.0          70.8 +/- 0.0          82.0
ERM_onlydn            & 92.6 +/- 0.0      & 89.8 +/- 0.0          98.7 +/- 0.0          86.5 +/- 0.0          91.9
TWA                   93.3 +/- 0.0          90.5 +/- 0.0          98.8 +/- 0.0          88.7 +/- 0.0          92.8
TWAMA                 91.9 +/- 0.0          85.9 +/- 0.0          98.7 +/- 0.0          87.4 +/- 0.0          91.0

D                     & 90.4 & 82.7 & 98.7 & 82.5 & 88.6
D_onlydn & 93.5 & 90.2 & 98.5 & 88.2 & 92.6
D_TWA           &     92.6 & 89.0 & 98.9 & 87.9 & 92.1
D_TWAMA       &     93.0 & 88.4 & 99.0 & 87.9 & 92.1


python3 -m domainbed.scripts.collect_results --input_dirs /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs0_erm123wn_idn1erm0921r0_lp_0916 /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs1_erm023wn_idn1erm0921r0_lp_0916 /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs2_erm013wn_idn1erm0921r0_lp_0916 /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs3_erm012wn_idn1erm0921r0_lp_0916



(pytorch) [utr15kn@jean-zay1: domainbedv2]$ python3 -m domainbed.scripts.collect_results --input_dirs /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs0_erm123wn_idn1erm0921r0_lp_0916 /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs1_erm023wn_idn1erm0921r0_lp_0916 /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs2_erm013wn_idn1erm0921r0_lp_0916 /gpfsscratch/rech/edr/utr15kn/experiments/domainbed/pacs3_erm012wn_idn1erm0921r0_lp_0916



Total records: 4080

-------- Dataset: PACS, model selection method: training-domain validation set
Algorithm             A                     C                     P                     S                     Avg
erm123wn_idn1erm0921  92.6 +/- 0.0          X                     X                     X                     X
erm023wn_idn1erm0921  X                     89.8 +/- 0.0          X                     X                     X
erm013wn_idn1erm0921  X                     X                     98.7 +/- 0.0          X                     X
erm012wn_idn1erm0921  X                     X                     X                     86.5 +/- 0.0          X

-------- Dataset: PACS, model selection method: test-domain validation set (oracle)
Algorithm             A                     C                     P                     S                     Avg
erm123wn_idn1erm0921  94.2 +/- 0.0          X                     X                     X                     X
erm023wn_idn1erm0921  X                     89.8 +/- 0.0          X                     X                     X
erm013wn_idn1erm0921  X                     X                     97.8 +/- 0.0          X                     X
erm012wn_idn1erm0921  X                     X                     X                     87.4 +/- 0.0          X
